<div wm-slider>
    <p>
        <img src="http://files.cod3r.com.br/curso-web/imagem1.jpg"
            alt="Muro da Cidade"
            width="570" height="342"
            title="Muro da Cidade por Tarso Bessa">
    </p>
    
    <p>
        <img src="http://files.cod3r.com.br/curso-web/imagem2.gif"
            alt="Intro Cod3r" height="342">
    </p>
    
    <p class="circular">
        <img src="http://files.cod3r.com.br/curso-web/imagem3.png"
            alt="Rio de Janeiro" height="342">
    </p>
    
    <p class="texto">
        <img src="http://files.cod3r.com.br/curso-web/avatar.jpg"
            alt="Avatar" height="50" align="left">
        Texto sdfsdf ds fsdf sdfsdf sdfsdf fssdsdf sdf sdfs df
        sd sdf sdfsdf sdf sdfsdf sdf sd fs f sdf er fw r sd fasd
        kjadshkjhd dkjheueuhek ekjhe kjehue ekjhe ekjh ekjheuekjhe
        ekjhekjhe ekjhe ehekjhekjhe kjeh e ekejhek jehe hekjhe ee
        ekjhe ee kjehkjhe kejhkjeh ee kejh e ekjhekjehe ekejhekejh
        ekjhekjhe e ekjheekjhe ehekjh ee kejhekjhekjhe e ekjhek ee
        ekjhekjh eee kjheekehekejhe e ekjehekhje ee
    </p>
    
    <p class="cidade"></p>
    
    <p>
        <picture>
            <source srcset="http://files.cod3r.com.br/curso-web/logo-larga.png"
                media="(min-width: 600px)">
            <img src="http://files.cod3r.com.br/curso-web/logo-estreita.png" alt="Logo">
        </picture>
    </p>
</div>

<style>
  p {
        position: absolute;
        display: none;
    }

    .circular {
        width: 513px;
        background-color: #444;
    }



    .texto {
        width: 400px;
    }

    .texto img {
        margin-right: 10px;
    }

    .cidade {
        width: 513px;
        height: 342px;
        background-image: url('http://files.cod3r.com.br/curso-web/imagem4.jpg');
        background-position: center;
        background-repeat: no-repeat;
        background-size: 200%;
    }



</style>

<script>
    const NodeListaImagem = document.querySelectorAll('[wm-slider] > p');
    const PercusorImagem = {
        Imagens: Array.from(NodeListaImagem),
        PxPercurso: [],
        passos: 10,
        ImagensTela:[]
    }

//
AparecendoPrimeirasImagem(PercusorImagem,0)

    function AparecendoPrimeirasImagem(PercusorImagem,parametro){
        let TelaCompleta=innerWidth;
        for(let i=0;i<PercusorImagem.Imagens.length;i++)
        {            
            if(TelaCompleta>0){
                PercusorImagem.Imagens[i].style.display='block';
                if(i)
                {
                    PercusorImagem.PxPercurso[i]= PercusorImagem.PxPercurso[i-1]+PercusorImagem.Imagens[i-1].clientWidth;
                }
                else{
                    PercusorImagem.PxPercurso[i]=parametro;
                }
                PercusorImagem.Imagens[i].style.left = `${PercusorImagem.PxPercurso[i]}px`;
                TelaCompleta=TelaCompleta-PercusorImagem.PxPercurso[i];
            }
            else { break; }

        }

        //Mover(PercusorImagem);
        return PercusorImagem
    }


    function Mover(PercusorImagem,callback){
        for(let i in PercusorImagem.PxPercurso)
            {
                PercusorImagem.PxPercurso[i]=PercusorImagem.PxPercurso[i]-PercusorImagem.passos;
                PercusorImagem.Imagens[i].style.left = `${PercusorImagem.PxPercurso[i]}px`;

                if(PercusorImagem.PxPercurso[i]<= -PercusorImagem.Imagens[i].clientWidth)
                {
                    PercusorImagem.Imagens[i].style.display = 'none';                 
                    PercusorImagem.Imagens.push(PercusorImagem.Imagens[i]);
                    PercusorImagem.Imagens.shift();
                    //[,PercusorImagem.Imagens]=[...PercusorImagem.Imagens,PercusorImagem.Imagens[i]]  
                    PercusorImagem.PxPercurso.shift();
                    break;
                }
                     
            }

        //PX do ultimo mais o tamanho dele tem que ser menor que o tamanho da tela para chamar a proxima Imagem
        debugger;
        const TamanhoUltimo=PercusorImagem.PxPercurso[PercusorImagem.PxPercurso.length-1]+PercusorImagem.Imagens[PercusorImagem.PxPercurso.length-1].clientWidth;
        if(TamanhoUltimo<(innerWidth-PercusorImagem.Imagens[PercusorImagem.PxPercurso.length].clientWidth))
        {
           AcrescentarImagemTela(PercusorImagem,PercusorImagem.PxPercurso.length);
        }
           
            setTimeout(() => Mover(PercusorImagem,callback), 20)
          
            return PercusorImagem

}

function AcrescentarImagemTela(PercusorImagem,Indice)
{
    PercusorImagem.Imagens[Indice].style.display='block';
    PercusorImagem.PxPercurso[Indice]=(PercusorImagem.PxPercurso[Indice-1]+PercusorImagem.Imagens[Indice-1].clientWidth);
    PercusorImagem.Imagens[Indice].style.left = `${PercusorImagem.PxPercurso[Indice]}px`;
}

</script>